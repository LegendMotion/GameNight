import{S as f}from"./assets/sweetalert2.esm.all-BQIkj5Wb.js";async function k(t="FEST123"){try{const e=await fetch(`/api/collection.php?gamecode=${t}`);if(!e.ok)throw new Error("Klarte ikke Ã¥ laste spillmodusen.");return await e.json()}catch(e){return console.error(e),null}}function w(t,e={}){const{containerId:n="app",nextBtnId:r="nextBtn",applyBackground:i=!0}=e,o=document.getElementById(n),a=new Set,s=JSON.parse(localStorage.getItem("players")||"[]"),u={challenge:{background:"/backgrounds/challenge.jpg",title:"/titles/challenge.png"},never:{background:"/backgrounds/jegharaldri.jpg",title:"/titles/jegharaldri.png"},spillthetea:{background:"/backgrounds/spillthetea.jpg",title:"/titles/spillthetea.png"},yayornay:{background:"/backgrounds/yayornay.jpg",title:"/titles/yayornay.png"}};function p(){const l=t.challenges.filter(h=>!a.has(h.id));if(l.length===0){o.innerHTML="<h2>Spillet er ferdig ðŸŽ‰</h2>";return}const d=l[Math.floor(Math.random()*l.length)];a.add(d.id),y(d)}function m(l){return s.length===0?l:l.replace(/{{player}}/gi,()=>{const d=Math.floor(Math.random()*s.length);return s[d]})}function y(l){const d=u[l.type]||u.challenge;i&&(document.body.style.backgroundImage=`url('${d.background}')`),o.innerHTML=`
      <div class="challenge-card">
        <img src="${d.title}" alt="${l.type}" />
        <h3>${m(l.title)}</h3>
        <button id="${r}">Neste</button>
      </div>
    `,document.getElementById(r).addEventListener("click",p)}p()}function b(){const t=document.getElementById("app");t.innerHTML=`
    <h2>Velg spillmodus</h2>
    <input id="gamecodeInput" placeholder="FEST123" />
    <button id="loadBtn">Start spill</button>
  `,document.getElementById("loadBtn").addEventListener("click",async()=>{const e=document.getElementById("gamecodeInput").value.trim(),n=await k(e);n?(localStorage.setItem("activeCollection",JSON.stringify(n)),w(n)):f.fire({icon:"error",title:"Oops... ",text:"Fant ikke spillmodus med kode "+e})})}function E(){const t=document.getElementById("app");t.innerHTML=`
    <h2>Legg til spillere</h2>
    <ul id="playerList"></ul>
    <input id="playerName" placeholder="Spillernavn" />
    <button id="addPlayer">Legg til</button>
    <p id="playerMessage" style="color: red;"></p>
    <button id="continue">Fortsett</button>
  `;const e=document.getElementById("playerList"),n=[],r=document.getElementById("playerMessage");document.getElementById("addPlayer").addEventListener("click",()=>{const o=document.getElementById("playerName"),a=o.value.trim();if(!a){r.textContent="Skriv inn et navn.";return}if(n.includes(a)){r.textContent="Navnet er allerede lagt til.";return}n.push(a),i(),o.value="",r.textContent=""}),document.getElementById("continue").addEventListener("click",()=>{if(n.length<2){r.textContent="Legg til minst to spillere!";return}localStorage.setItem("players",JSON.stringify(n)),b()});function i(){e.innerHTML="",n.forEach((o,a)=>{const s=document.createElement("li");s.textContent=o;const u=document.createElement("button");u.textContent="Slett",u.addEventListener("click",()=>{n.splice(a,1),i(),n.length>=2&&(r.textContent="")}),s.appendChild(u),e.appendChild(s)})}}function v(){if("serviceWorker"in navigator)return navigator.serviceWorker.register("/service-worker.js").then(t=>{console.log("Service worker registered:",t)}).catch(t=>{console.error("Service worker registration failed:",t)})}function I({title:t,description:e,url:n,image:r,type:i="website"}={}){t&&(document.title=t),e&&c("name","description",e),n&&S(n),t&&c("property","og:title",t),e&&c("property","og:description",e),n&&c("property","og:url",n),c("property","og:type",i),r&&c("property","og:image",r),c("name","twitter:card",r?"summary_large_image":"summary"),t&&c("name","twitter:title",t),e&&c("name","twitter:description",e),r&&c("name","twitter:image",r)}function c(t,e,n){if(!n)return;let r=document.querySelector(`meta[${t}="${e}"]`);r||(r=document.createElement("meta"),r.setAttribute(t,e),document.head.appendChild(r)),r.setAttribute("content",n)}function S(t){let e=document.querySelector('link[rel="canonical"]');e||(e=document.createElement("link"),e.setAttribute("rel","canonical"),document.head.appendChild(e)),e.setAttribute("href",t)}async function L(){try{let o=function(){dataLayer.push(arguments)};const t=await fetch("/api/analytics.php");if(!t.ok)return;const{measurementId:e,anonymizeIp:n,respectDNT:r}=await t.json();if(!e||r&&(navigator.doNotTrack==="1"||window.doNotTrack==="1"||navigator.msDoNotTrack==="1"))return;const i=document.createElement("script");i.async=!0,i.src=`https://www.googletagmanager.com/gtag/js?id=${e}`,document.head.appendChild(i),window.dataLayer=window.dataLayer||[],window.gtag=o,o("js",new Date);const a={};n&&(a.anonymize_ip=!0),o("config",e,a)}catch(t){console.error("Analytics init failed",t)}}let g="";async function C(){if(!window.location.pathname.startsWith("/admin"))try{const t=await fetch("/api/ads.php");if(!t.ok)return;const{publisherId:e}=await t.json();if(!e)return;g=e;const n=document.createElement("script");n.async=!0,n.src=`https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=${encodeURIComponent(g)}`,n.crossOrigin="anonymous",document.head.appendChild(n)}catch(t){console.error("Ads init failed",t)}}document.addEventListener("DOMContentLoaded",()=>{E(),v(),I({title:"GameNight",url:window.location.href}),L(),C()});
